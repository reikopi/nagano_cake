<h1>注文履歴詳細</h1>

<p>購入者
<%= @order.customer.full_name %>
</p>
<p>注文日
<%= l @order.created_at %>
</p>
<p>配送先
<!--郵便番号-->
<%= @order.postal_code %>
<!--住所-->
<%= @order.address %>
</br>
<%= @order.name %>
</p>
<p>支払方法
<%= @order.payment_method_i18n %>
</p>
<p>注文ステータス
<%= form_with model: @order, url:admin_order_path, method: :patch do |f| %>
    <%= f.select :status, Order.statuses_i18n.invert %>
    <%= f.submit "更新" %>
<% end %>
</p>

<table>
  <thead>

  <tr>
    <th>商品名</th>
    <th>単価（税込）</th>
    <th>数量</th>
    <th>小計</th>
    <th>制作ステータス</th>
    <th></th>
  </tr>
  </thead>

  <tbody>
    <% @order_details.each do |order_detail| %>
    <tr>
      <td><%= order_detail.item.name %></td>
      <td><%= order_detail.add_tax_price %></td>
      <td><%= order_detail.amount %></td>
      <td><%= order_detail.subtotal.to_s(:delimited) %></td>

      <td>
      <%= form_with model: order_detail, url:admin_order_detail_path, method: :patch do |f| %>
      <%= f.select :making_status, OrderDetail.making_statuses_i18n.invert %>
      <%= f.submit "更新" %>
      <% end %>
     </td>
    </tr>
    <% end %>
  </tbody>
</table>

